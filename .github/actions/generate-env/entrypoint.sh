#!/bin/bash
set -e
GITHUB_WORKSPACE="${GITHUB_WORKSPACE:-$(pwd)}"
ENV_FILE="$GITHUB_WORKSPACE/.env"

echo "ðŸ“¦ Generating .env file at $ENV_FILE"

cat <<EOF > "$ENV_FILE"
NODE_ENV=${NODE_ENV}
SONAR_ES_BOOTSTRAP_CHECKS_DISABLE=${SONAR_ES_BOOTSTRAP_CHECKS_DISABLE}
SONAR_JDBC_URL=${SONAR_JDBC_URL}
SONAR_JDBC_USERNAME=${SONAR_JDBC_USERNAME}
SONAR_JDBC_PASSWORD=${SONAR_JDBC_PASSWORD}
SONARQUBE_JVM_OPTIONS=${SONARQUBE_JVM_OPTIONS}
SONAR_TOKEN=${SONAR_TOKEN}
POSTGRES_USER=${POSTGRES_USER}
POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
POSTGRES_DB=${POSTGRES_DB}
MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
MYSQL_DATABASE=${MYSQL_DATABASE}
MYSQL_USER=${MYSQL_USER}
MYSQL_PASSWORD=${MYSQL_PASSWORD}
MYSQL_ROOT=${MYSQL_ROOT}
DATA_SOURCE_NAME=${DATA_SOURCE_NAME}
MYSQL_EXPORTER_PASSWORD=${MYSQL_EXPORTER_PASSWORD}
MONGODB_URI=${MONGODB_URI}
MONGO_INITDB_DATABASE=${MONGO_INITDB_DATABASE}
MONGO_INITDB_ROOT_USERNAME=${MONGO_INITDB_ROOT_USERNAME}
MONGO_INITDB_ROOT_PASSWORD=${MONGO_INITDB_ROOT_PASSWORD}
ME_CONFIG_MONGODB_SERVER=${ME_CONFIG_MONGODB_SERVER}
ME_CONFIG_MONGODB_PORT=${ME_CONFIG_MONGODB_PORT}
ME_CONFIG_MONGODB_ADMINUSERNAME=${ME_CONFIG_MONGODB_ADMINUSERNAME}
ME_CONFIG_MONGODB_ADMINPASSWORD=${ME_CONFIG_MONGODB_ADMINPASSWORD}
ME_CONFIG_MONGODB_AUTH_DATABASE=${ME_CONFIG_MONGODB_AUTH_DATABASE}
ME_CONFIG_BASICAUTH_USERNAME=${ME_CONFIG_BASICAUTH_USERNAME}
ME_CONFIG_BASICAUTH_PASSWORD=${ME_CONFIG_BASICAUTH_PASSWORD}
ME_CONFIG_MONGODB_ENABLE_ADMIN=${ME_CONFIG_MONGODB_ENABLE_ADMIN}
ME_CONFIG_MONGODB_USE_UNIFIED_TOPOLOGY=${ME_CONFIG_MONGODB_USE_UNIFIED_TOPOLOGY}
PGADMIN_DEFAULT_EMAIL=${PGADMIN_DEFAULT_EMAIL}
PGADMIN_DEFAULT_PASSWORD=${PGADMIN_DEFAULT_PASSWORD}
GF_SECURITY_ADMIN_USER=${GF_SECURITY_ADMIN_USER}
GF_SECURITY_ADMIN_PASSWORD=${GF_SECURITY_ADMIN_PASSWORD}
GF_AUTH_DISABLE_LOGIN_FORM=${GF_AUTH_DISABLE_LOGIN_FORM}
GF_AUTH_ANONYMOUS_ENABLED=${GF_AUTH_ANONYMOUS_ENABLED}
PROMETHEUS_MULTIPROC_DIR=${PROMETHEUS_MULTIPROC_DIR}
REDIS_ADDR=${REDIS_ADDR}
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=${REDIS_PORT}
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_EXPORTER_PASSWORD=${REDIS_EXPORTER_PASSWORD}
REDIS_EXPORTER_URL=${REDIS_EXPORTER_URL}
ACT=${ACT}
MYSQL_PASSWORD=${MYSQL_PASSWORD}
MYSQL_USER=${MYSQL_USER}
MYSQL_DATABASE=${MYSQL_DATABASE}
MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
MYSQL_ROOT=${MYSQL_ROOT}
MYSQL_USER=${MYSQL_USER}
MYSQL_PASSWORD=${MYSQL_PASSWORD}
MYSQL_DATABASE=${MYSQL_DATABASE}
MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
MYSQL_ROOT=${MY}
DATA_SOURCE_NAME=${DATA_SOURCE_NAME}
MYSQL_EXPORTER_PASSWORD=${MYSQL_EXPORTER_PASSWORD}
MONGODB_URI=${MONGODB_URI}
MONGO_INITDB_DATABASE=${MONGO_INITDB_DATABASE}
MONGO_INITDB_ROOT_USERNAME=${MONGO_INITDB_ROOT_USERNAME}
MONGO_INITDB_ROOT_PASSWORD=${MONGO_INITDB_ROOT_PASSWORD}
ME_CONFIG_MONGODB_SERVER=${ME_CONFIG_MONGODB_SERVER}
ME_CONFIG_MONGODB_PORT=${ME_CONFIG_MONGODB_PORT}
ME_CONFIG_MONGODB_ADMINUSERNAME=${ME_CONFIG_MONGODB_ADMINUSERNAME}
ME_CONFIG_MONGODB_ADMINPASSWORD=${ME_CONFIG_MONGODB_ADMINPASSWORD}
ME_CONFIG_MONGODB_AUTH_DATABASE=${ME_CONFIG_MONGODB_AUTH_DATABASE}
ME_CONFIG_BASICAUTH_USERNAME=${ME_CONFIG_BASICAUTH_USERNAME}
ME_CONFIG_BASICAUTH_PASSWORD=${ME_CONFIG_BASICAUTH_PASSWORD}
ME_CONFIG_MONGODB_ENABLE_ADMIN=${ME_CONFIG_MONGODB_ENABLE_ADMIN}
ME_CONFIG_MONGODB_USE_UNIFIED_TOPOLOGY=${ME_CONFIG_MONGODB_USE_UNIFIED_TOPOLOGY}
PGADMIN_DEFAULT_EMAIL=${PGADMIN_DEFAULT_EMAIL}
PGADMIN_DEFAULT_PASSWORD=${PGADMIN_DEFAULT_PASSWORD}
GF_SECURITY_ADMIN_USER=${GF_SECURITY_ADMIN_USER}
GF_SECURITY_ADMIN_PASSWORD=${GF_SECURITY_ADMIN_PASSWORD}
GF_AUTH_DISABLE_LOGIN_FORM=${GF_AUTH_DISABLE_LOGIN_FORM}
GF_AUTH_ANONYMOUS_ENABLED=${GF_AUTH_ANONYMOUS_ENABLED}
PROMETHEUS_MULTIPROC_DIR=${PROMETHEUS_MULTIPROC_DIR}
REDIS_ADDR=${REDIS_ADDR}
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=${REDIS_PORT}
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_EXPORTER_PASSWORD=${REDIS_EXPORTER_PASSWORD}
REDIS_EXPORTER_URL=${REDIS_EXPORTER_URL}
ACT=${ACT}

EOF

echo "âœ… .env file created successfully!"
